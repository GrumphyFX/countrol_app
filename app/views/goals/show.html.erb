<%= link_to '<i class="fa-solid fa-chevron-left"></i> Back'.html_safe, wallet_goals_path %>

<a href="">Share <i class="fa-solid fa-link"></i></a>
<h1><%= @goal.title %></h1>

<p>Goal:<b><%= @goal.amount %></p>
<p>Remaining: <%= @goal.goal_balance %></p>
<p>End date: <%= @goal.date %></p>
<p>Monthly payment: <%= @goal.goal_balance / @goal.current_month_progress[:remaining_months]%></p>
<p>Months: <%= @goal.current_month_progress[:months_past]%> of <%= @goal.current_month_progress[:total_months] %></p>


<%= link_to 'Add Transaction', new_wallet_transaction_path(@wallet, transaction_type: 'expense', goal_id: @goal.id), class: 'btn btn-primary' %>

<% if @goal.transactions.any? %>
  <h2>Transactions</h2>
  <ul>
    <% @goal.transactions.each do |transaction| %>
      <li>
        <%= transaction.category.icon %>
        <%= link_to transaction.title, wallet_transaction_path(@wallet.id, transaction.id) %>
        <%= transaction.amount %>
        <%= transaction.date %>
      </li>
    <% end %>
  </ul>
<% end %>

<div class="transaction-links d-flex justify-content-center mt-4">
  <%= link_to "Edit", edit_wallet_goal_path(@wallet), class: "btn btn-warning rounded-0" %>
  <%= link_to "Delete",
    wallet_goal_path(@goal, wallet_id: @wallet.id),
    data: {turbo_method: :delete, turbo_confirm: "Are you sure?"},
    class: "btn btn-secondary rounded-0"
  %>
</div>
